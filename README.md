# UDBM - ç»Ÿä¸€æ•°æ®åº“ç®¡ç†å¹³å° MVP

## ğŸš€ é¡¹ç›®æ¦‚è¿°

UDBM (Unified Database Management) æ˜¯ä¸€ä¸ªç»Ÿä¸€æ•°æ®åº“ç®¡ç†å¹³å°ï¼Œä¸“ä¸ºç®¡ç†å…¨å›½å¤šä¸ªåˆ†å…¬å¸çš„æ•°æ®åº“ç³»ç»Ÿè€Œè®¾è®¡ã€‚è¯¥å¹³å°æä¾›æ•°æ®åº“ç›‘æ§ã€è‡ªåŠ¨åŒ–è¿ç»´ã€æ™ºèƒ½å·¡æ£€ç­‰åŠŸèƒ½ã€‚

**æˆ‘ä»¬æ­£åœ¨å¹²ä¸€ä»¶ç–¯ç‹‚çš„äº‹æƒ…ï¼** - ç”¨AIé©±åŠ¨çš„æ–¹å¼å¿«é€Ÿå®ç°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ•°æ®åº“ç®¡ç†å¹³å°MVPã€‚

## ğŸ¯ MVPç‰ˆæœ¬ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
- **åç«¯API**: åŸºäºFastAPIçš„RESTful APIæœåŠ¡
- **æ•°æ®åº“ç®¡ç†**: PostgreSQLæ•°æ®åº“å®ä¾‹çš„å®Œæ•´CRUDæ“ä½œ
- **è¿æ¥æµ‹è¯•**: å®æ—¶æµ‹è¯•æ•°æ®åº“è¿æ¥çŠ¶æ€
- **å‰ç«¯ç•Œé¢**: åŸºäºReact + Ant Designçš„ç°ä»£åŒ–Webç•Œé¢
- **æ•°æ®åº“å»ºæ¨¡**: å®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„å’Œå…³ç³»è®¾è®¡
- **APIæ–‡æ¡£**: è‡ªåŠ¨ç”Ÿæˆçš„Swagger UIæ–‡æ¡£

### ğŸ”„ å¾…å®ç°åŠŸèƒ½
- ç”¨æˆ·æƒé™ç®¡ç† (JWTè®¤è¯ã€è§’è‰²æƒé™)
- PostgreSQLç›‘æ§åŠŸèƒ½ (æ€§èƒ½æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥)
- å¤‡ä»½æ¢å¤åŠŸèƒ½ (è‡ªåŠ¨åŒ–å¤‡ä»½ã€æ•°æ®æ¢å¤)
- å‘Šè­¦ç³»ç»Ÿ (æ™ºèƒ½å‘Šè­¦ã€é€šçŸ¥æœºåˆ¶)
- å·¡æ£€åŠŸèƒ½ (è‡ªåŠ¨åŒ–å·¡æ£€ã€æŠ¥å‘Šç”Ÿæˆ)

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ç•Œé¢      â”‚    â”‚   åç«¯API       â”‚    â”‚   æ•°æ®åº“        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  React 18       â”‚â—„â”€â”€â–ºâ”‚  FastAPI        â”‚â—„â”€â”€â–ºâ”‚  PostgreSQL     â”‚
â”‚  Ant Design 5   â”‚    â”‚  SQLAlchemy     â”‚    â”‚  Redis          â”‚
â”‚  Axios          â”‚    â”‚  Pydantic       â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
UDBM/
â”œâ”€â”€ udbm-backend/           # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/           # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ db/            # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/       # æ•°æ®éªŒè¯
â”‚   â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â””â”€â”€ main.py        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ init.sql           # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ requirements.txt   # Pythonä¾èµ–
â”‚   â”œâ”€â”€ Dockerfile         # å®¹å™¨é…ç½®
â”‚   â””â”€â”€ README.md          # åç«¯æ–‡æ¡£
â”œâ”€â”€ udbm-frontend/         # å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/      # APIæœåŠ¡
â”‚   â”‚   â””â”€â”€ App.js         # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ package.json       # å‰ç«¯ä¾èµ–
â”‚   â”œâ”€â”€ Dockerfile         # å®¹å™¨é…ç½®
â”‚   â””â”€â”€ README.md          # å‰ç«¯æ–‡æ¡£
â””â”€â”€ README.md              # é¡¹ç›®æ€»è§ˆ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
chmod +x ./start-project.sh
./start-project.sh start         # æœ¬åœ°æ¨¡å¼ï¼šåç«¯ + å‰ç«¯

# å¸¸ç”¨ï¼šä»…åç«¯/ä»…å‰ç«¯/æŒ‡å®šç«¯å£
./start-project.sh start --backend
./start-project.sh start --frontend
./start-project.sh start --port 8000
```

- å‰ç«¯: http://localhost:3000
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs

### 2. åˆ†æ­¥å¯åŠ¨

æ–¹å¼Aï¼šDocker å¯åŠ¨æ•°æ®åº“ä¸ç¼“å­˜ + æœ¬åœ°å¯åŠ¨åç«¯

```bash
cd udbm-backend
docker-compose up -d postgres redis   # é¦–æ¬¡å¯åŠ¨å°†è‡ªåŠ¨æ‰§è¡Œ init.sql ç­‰è„šæœ¬
pip install -r requirements.txt
python start.py
```

æ–¹å¼Bï¼šDocker å¯åŠ¨åŒ…å« API åœ¨å†…çš„å…¨æ ˆåç«¯

```bash
cd udbm-backend
docker-compose up -d                   # å°†å¯åŠ¨ postgresã€redisã€api
```

æ–¹å¼Cï¼šå¯åŠ¨å‰ç«¯

```bash
cd udbm-frontend
npm install
npm start
```

å‰ç«¯é»˜è®¤é€šè¿‡ CRA ä»£ç†è¿æ¥åç«¯ï¼Œä¹Ÿå¯è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export REACT_APP_API_BASE_URL="http://localhost:8000/api/v1"
```

### 3. è®¿é—®åº”ç”¨

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health æˆ– http://localhost:8000/api/v1/health/

## ğŸ® ä½¿ç”¨æ¼”ç¤º

### æ•°æ®åº“å®ä¾‹ç®¡ç†

1. **æ·»åŠ æ•°æ®åº“å®ä¾‹**
   - ç‚¹å‡»"æ·»åŠ æ•°æ®åº“"æŒ‰é’®
   - å¡«å†™æ•°æ®åº“è¿æ¥ä¿¡æ¯
   - é€‰æ‹©æ•°æ®åº“ç±»å‹å’Œç¯å¢ƒ

2. **æµ‹è¯•è¿æ¥**
   - ç‚¹å‡»æ•°æ®åº“åˆ—è¡¨ä¸­çš„æµ‹è¯•æŒ‰é’®
   - æŸ¥çœ‹è¿æ¥çŠ¶æ€å’Œå“åº”æ—¶é—´

3. **æŸ¥çœ‹è¯¦æƒ…**
   - ç‚¹å‡»æ•°æ®åº“åç§°æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
   - æŸ¥çœ‹è¿æ¥ä¿¡æ¯å’Œé…ç½®è¯¦æƒ…

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

### æ•°æ®åº“è¿æ¥æµ‹è¯•

```python
# æµ‹è¯•PostgreSQLè¿æ¥
result = await DatabaseConnectionService.test_connection(
    db_type="postgresql",
    host="localhost",
    port=5432,
    database="postgres",
    username="postgres",
    password="password"
)
print(f"è¿æ¥æˆåŠŸ: {result.success}, å“åº”æ—¶é—´: {result.response_time}s")
```

### APIè°ƒç”¨ç¤ºä¾‹

```bash
# è·å–æ•°æ®åº“åˆ—è¡¨
curl http://localhost:8000/api/v1/databases/

# åˆ›å»ºæ•°æ®åº“å®ä¾‹
curl -X POST http://localhost:8000/api/v1/databases/ \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æ¼”ç¤ºæ•°æ®åº“",
    "type_id": 1,
    "host": "localhost",
    "port": 5432,
    "database_name": "demo",
    "environment": "development"
  }'

# æµ‹è¯•æ•°æ®åº“è¿æ¥ï¼ˆæ³¨æ„ä¸º POST æ–¹æ³•ï¼‰
curl -X POST http://localhost:8000/api/v1/databases/1/test-connection
```

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨

- **users**: ç”¨æˆ·ä¿¡æ¯è¡¨
- **database_instances**: æ•°æ®åº“å®ä¾‹è¡¨
- **database_types**: æ•°æ®åº“ç±»å‹è¡¨
- **metric_definitions**: ç›‘æ§æŒ‡æ ‡å®šä¹‰è¡¨
- **metrics**: ç›‘æ§æŒ‡æ ‡æ•°æ®è¡¨
- **alert_rules**: å‘Šè­¦è§„åˆ™è¡¨
- **alerts**: å‘Šè­¦å†å²è¡¨
- **backup_policies**: å¤‡ä»½ç­–ç•¥è¡¨
- **backup_tasks**: å¤‡ä»½ä»»åŠ¡è¡¨

### æ•°æ®å…³ç³»

```
users â”€â”€â”¬â”€â”€â–º user_roles â—„â”€â”€â”¬â”€â”€ roles
        â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º role_permissions â”€â”€â–º permissions
                           â”‚
database_instances â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º database_groups
        â”‚                 â”‚
        â”œâ”€â–º metrics â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º metric_definitions
        â”œâ”€â–º alerts â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º alert_rules
        â””â”€â–º backup_tasks â”€â”¼â”€â”€â–º backup_policies
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### åç«¯å¼€å‘

```bash
cd udbm-backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python start.py
```

### å‰ç«¯å¼€å‘

```bash
cd udbm-frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

## ğŸ” ç›‘æ§å’Œè°ƒè¯•

### å¥åº·æ£€æŸ¥

```bash
# åŸºç¡€å¥åº·æ£€æŸ¥
curl http://localhost:8000/api/v1/health/

# æ•°æ®åº“å¥åº·æ£€æŸ¥
curl http://localhost:8000/api/v1/health/database

# è¯¦ç»†å¥åº·æ£€æŸ¥
curl http://localhost:8000/api/v1/health/detailed
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
docker-compose logs -f api

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker-compose logs -f postgres
```

## ğŸ¯ MVPé‡Œç¨‹ç¢‘

- [x] **Phase 1**: é¡¹ç›®åŸºç¡€æ¶æ„æ­å»º
- [x] **Phase 2**: æ•°æ®åº“å®ä¾‹ç®¡ç†åŠŸèƒ½
- [x] **Phase 3**: å‰ç«¯ç•Œé¢å¼€å‘
- [x] **Phase 4**: è¿æ¥æµ‹è¯•åŠŸèƒ½
- [ ] **Phase 5**: ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿ
- [ ] **Phase 6**: ç›‘æ§å’Œå‘Šè­¦åŠŸèƒ½
- [ ] **Phase 7**: å¤‡ä»½æ¢å¤åŠŸèƒ½
- [ ] **Phase 8**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ğŸŒŸ äº®ç‚¹ç‰¹æ€§

1. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ**: ä½¿ç”¨æœ€æ–°çš„React 18ã€FastAPIã€SQLAlchemy 2.0
2. **å®Œæ•´çš„APIè®¾è®¡**: RESTful API + è‡ªåŠ¨ç”Ÿæˆçš„OpenAPIæ–‡æ¡£
3. **å“åº”å¼å‰ç«¯**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡çš„ç°ä»£åŒ–ç•Œé¢
4. **ç±»å‹å®‰å…¨**: åç«¯ä½¿ç”¨Pydanticè¿›è¡Œæ•°æ®éªŒè¯
5. **å¼‚æ­¥ç¼–ç¨‹**: åç«¯é‡‡ç”¨async/awaitæ¨¡å¼æå‡æ€§èƒ½
6. **å®¹å™¨åŒ–æ”¯æŒ**: å®Œæ•´çš„Dockeré…ç½®ä¾¿äºéƒ¨ç½²

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

- **APIå“åº”æ—¶é—´**: < 100ms (æœ¬åœ°ç¯å¢ƒ)
- **æ•°æ®åº“è¿æ¥æµ‹è¯•**: < 500ms
- **å‰ç«¯é¡µé¢åŠ è½½**: < 2s
- **å†…å­˜å ç”¨**: < 200MB (åŸºç¡€é…ç½®)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

1. **æŠ¥å‘Šé—®é¢˜**: åœ¨GitHub Issuesä¸­æŠ¥å‘Šbugæˆ–å»ºè®®æ–°åŠŸèƒ½
2. **ä»£ç è´¡çŒ®**: æäº¤Pull Requestæ”¹è¿›ä»£ç 
3. **æ–‡æ¡£å®Œå–„**: å¸®åŠ©å®Œå–„é¡¹ç›®æ–‡æ¡£
4. **åŠŸèƒ½æµ‹è¯•**: æµ‹è¯•æ–°åŠŸèƒ½å¹¶æä¾›åé¦ˆ

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§å„å­é¡¹ç›®çš„LICENSEæ–‡ä»¶

## ğŸ‰ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªç–¯ç‹‚é¡¹ç›®è´¡çŒ®åŠ›é‡çš„äººä»¬ï¼æˆ‘ä»¬æ­£åœ¨ç”¨AIé©±åŠ¨çš„æ–¹å¼é‡æ–°å®šä¹‰æ•°æ®åº“ç®¡ç†å¹³å°çš„å¼€å‘æ–¹å¼ã€‚

---

**è®©æˆ‘ä»¬ä¸€èµ·å¹²ä¸€ä»¶ç–¯ç‹‚çš„äº‹æƒ…ï¼** ğŸš€
